/*** @file main.c* @brief scrolling.* @author black diamond* @version 0.19* @date juin 18, 2020** testing program for scrolling **/#include "SDL/SDL.h"#include <stdio.h>#include <stdlib.h>#include <SDL/SDL_ttf.h>#include <SDL/SDL_mixer.h>#include <SDL/SDL_image.h>#include "sahar.h"int main( int argc, char* args[] ){TTF_Init();//The images    SDL_Surface *screen = NULL;    SDL_Surface *image = NULL;    SDL_Surface *image2 = NULL;    SDL_Surface *textdT = NULL;    SDL_Surface *pX = NULL;    SDL_Surface *cX = NULL;	    SDL_Surface *temp_image2 = NULL;      SDL_Rect cam;    SDL_Rect posPlayer;	SDL_Rect posdT;	SDL_Rect pXR;	SDL_Rect cXR;	//anim char	TTF_Font *textF = NULL;	SDL_Color black = {0, 0, 0};    char pause;    //Start SDL    if(SDL_Init( SDL_INIT_VIDEO )!=0)      {        printf("Unable to initialize SDL: %s\n",SDL_GetError());        return 1;      };    //Set up screen    screen = SDL_SetVideoMode( 1200, 600, 32, SDL_SWSURFACE | SDL_DOUBLEBUF);     if(screen == NULL)      {        printf("Unable to set video mode: %s",SDL_GetError());        return 1;      }     if (Mix_OpenAudio(44100,MIX_DEFAULT_FORMAT,MIX_DEFAULT_CHANNELS,1024)==-1)     {        printf("%s",Mix_GetError());     }     Mix_Music *music;     music = Mix_LoadMUS("music.mp3");     Mix_PlayMusic(music,-1);   image = IMG_Load("bg.png");     if(image == NULL)       {         printf("Unable to load bitmap: %s\n",SDL_GetError());         return 1;       }   cam.x=0;   cam.y=0;   cam.w=image->w;   cam.h=image->h;      image2 = IMG_Load("wegf.png");      posPlayer.x=300;   posPlayer.y=150;   posPlayer.w=1200;   posPlayer.h=600;      posdT.x=200;   posdT.y=20;   pXR.x=200;   cXR.x=200;   pXR.y=40;   cXR.y=60;                               SDL_Flip(image);                SDL_Flip(screen);         SDL_Event event;   double FPS = 60;	int dT;   double FrmStrt=0,FrmEnd=0;   int done = 1;   int right,left,sprint;   int maxspeed=5;   double xVel,yVel,canJump=1;   double v_jump = -7;   double gravity = 0.2;	int acc=0;	int ianim=0,ianim_c=1,timer=0,maxtimer=4;//TTF fontchar DT[50],playerX[50],camX[50];char animchar[50];textF = TTF_OpenFont("bebas.ttf", 20);enemie e;load_enemie (&e);		//jump   void jump()	{	if (canJump==1) yVel=v_jump;	}	   while(done)    {            //fps	FrmEnd=SDL_GetTicks();	timer++;	//text	sprintf(DT,"xVel = %f",xVel);	sprintf(playerX,"playerX = %d",posPlayer.x);	sprintf(camX,"camX = %d",cam.x);	textdT = TTF_RenderText_Blended(textF,DT, black);	pX = TTF_RenderText_Blended(textF,playerX, black);	cX = TTF_RenderText_Blended(textF,camX, black);    while(SDL_PollEvent(&event))    {        switch(event.type)        {           case SDL_QUIT:           done = 0;           break;           case SDL_KEYDOWN:            {               		if(event.key.keysym.sym==SDLK_ESCAPE) done = 0;                if(event.key.keysym.sym==SDLK_RIGHT)                   {		   right=1;		acc=-0.04;		   ianim=1;}                if(event.key.keysym.sym==SDLK_LEFT)                   {		   left=1;		acc=-0.04;			}                if(event.key.keysym.sym==SDLK_UP)                  jump();					if(event.key.keysym.sym==SDLK_s)		   sprint=1;maxtimer=4;		                               break;            }case SDL_MOUSEBUTTONDOWN:if(SDL_BUTTON_LEFT){int k=event.motion.x;int z=(posPlayer.x)-k;if(z>0) {(left)=1;(ianim)=1;}else {(right)=1;}}break;case SDL_MOUSEBUTTONUP :{(right)=0;(left)=0;break;}	case SDL_KEYUP:	{		                if(event.key.keysym.sym==SDLK_RIGHT)                   {right=0;ianim=0;}                if(event.key.keysym.sym==SDLK_LEFT)                   left=0;		if(event.key.keysym.sym==SDLK_s)		   sprint=0;maxtimer=4;			}        }    }	//x movement	if(right==1) xVel+=0.3;	if(left==1) xVel-=0.3;	if(right ==0 && xVel>0.2) xVel-=0.1;	if(left ==0 && xVel<-0.2) xVel+=0.1;	if(right==0 && left ==0 && xVel>=-0.2 && xVel<0.2) xVel=0; //STOP threshhold	//speed control	if(sprint==1) maxspeed = 9;	if(sprint==0) maxspeed = 5;	posPlayer.x+=xVel;	posPlayer.y+=yVel;	yVel += gravity*2;		if(posPlayer.y>400) {yVel=0;canJump=1;}	if(posPlayer.y<400) canJump=0;	//smoothing	//if(right==0 && xVel>0.2) xVel-=0.02;	//if(left==0 && xVel<-0.2) xVel+=0.02;	//if(left==0 && xVel>-0.1 && xVel<0) xVel=0;	//limit vel	if(xVel>maxspeed) xVel=maxspeed;	if(xVel<-maxspeed) xVel=-maxspeed;	//animation	if( timer>maxtimer  && canJump==1 )	{		if(right==1)		{		sprintf(animchar,"run/right/run%d.png",ianim_c);		image2=IMG_Load(animchar);		ianim_c++;		if(ianim_c>8) ianim_c=1;		timer=0;		}		if(left==1)		{		sprintf(animchar,"run/left/run%d.png",ianim_c);		image2=IMG_Load(animchar);		ianim_c++;		if(ianim_c>8) ianim_c=1;		timer=0;		}	}	if(right==0 && left == 0) image2=IMG_Load("wegf.png");	if(canJump==0 && xVel>=0) image2=IMG_Load("jump.png");         if(canJump==0 && xVel<0) image2=IMG_Load("jump2.png");	if(canJump==0 && xVel>=0 && yVel>0) image2=IMG_Load("fall.png");	if(canJump==0 && xVel<0 && yVel>0) image2=IMG_Load("fall2.png");		//camera	if(posPlayer.x>700 && -cam.x+cam.w>1210) {cam.x+=xVel;posPlayer.x=700;}	if(posPlayer.x<300 && cam.x>10) {cam.x+=xVel;posPlayer.x=300;}	//cam.y+=yVel;	if(posPlayer.x>1110 || posPlayer.x<0) xVel=0;	SDL_BlitSurface(image,&cam,screen,NULL);        SDL_BlitSurface(image2,NULL,screen,&posPlayer);	SDL_BlitSurface(textdT,NULL,screen,&posdT);	SDL_BlitSurface(pX,NULL,screen,&pXR);	SDL_BlitSurface(cX,NULL,screen,&cXR);	annimation_enemie(&e);	afficher_enemie(e,image,screen);	SDL_Flip(screen);	dT=SDL_GetTicks()-FrmEnd;	if (1000/FPS>dT)	{        SDL_Delay(1000/FPS-dT);	}			    }/* SDL_FillRect(screen,0,SDL_MapRGB(screen->format,255,255,0));*/            // pause=getchar();    SDL_FreeSurface(screen);    Mix_FreeMusic(music);    SDL_FreeSurface(image);    SDL_FreeSurface(image2);      //  pause=getchar();       //Quit SDL    SDL_Quit();	        return 0;    }